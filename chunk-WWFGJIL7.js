import{$ as I,B as g,G as S,J as b,La as T,Pb as w,S as c,T as $,V as n,Zb as h,c as r,fa as a,h as d,l as s,n as v,t as o,u,ua as M,v as f,x as l,z as y}from"./chunk-KLCY7QU5.js";var m=function(){function i(){}return i}(),E=function(){function i(t,e){this._ngZone=e,this.timerStart$=new r,this.idleDetected$=new r,this.timeout$=new r,this.idleMillisec=600*1e3,this.idleSensitivityMillisec=1e3,this.timeout=300,this.pingMillisec=120*1e3,t&&this.setConfig(t)}return i.prototype.startWatching=function(){var t=this;this.activityEvents$||(this.activityEvents$=f(o(window,"mousemove"),o(window,"resize"),o(document,"keydown"))),this.idle$=v(this.activityEvents$),this.idleSubscription&&this.idleSubscription.unsubscribe(),this.idleSubscription=this.idle$.pipe(g(this.idleSensitivityMillisec),l(function(e){return!e.length&&!t.isIdleDetected&&!t.isInactivityTimer}),n(function(){t.isIdleDetected=!0,t.idleDetected$.next(!0)}),c(function(){return t._ngZone.runOutsideAngular(function(){return u(1e3).pipe($(f(t.activityEvents$,y(t.idleMillisec).pipe(n(function(){t.isInactivityTimer=!0,t.timerStart$.next(!0)})))),b(function(){t.isIdleDetected=!1,t.idleDetected$.next(!1)}))})})).subscribe(),this.setupTimer(this.timeout),this.setupPing(this.pingMillisec)},i.prototype.stopWatching=function(){this.stopTimer(),this.idleSubscription&&this.idleSubscription.unsubscribe()},i.prototype.stopTimer=function(){this.isInactivityTimer=!1,this.timerStart$.next(!1)},i.prototype.resetTimer=function(){this.stopTimer(),this.isTimeout=!1},i.prototype.onTimerStart=function(){var t=this;return this.timerStart$.pipe(S(),c(function(e){return e?t.timer$:d(null)}))},i.prototype.onIdleStatusChanged=function(){return this.idleDetected$.asObservable()},i.prototype.onTimeout=function(){var t=this;return this.timeout$.pipe(l(function(e){return!!e}),n(function(){return t.isTimeout=!0}),s(function(){return!0}))},i.prototype.getConfigValue=function(){return{idle:this.idleMillisec/1e3,idleSensitivity:this.idleSensitivityMillisec/1e3,timeout:this.timeout,ping:this.pingMillisec/1e3}},i.prototype.setConfigValues=function(t){if(this.idleSubscription&&!this.idleSubscription.closed){console.error("Call stopWatching() before set config values");return}this.setConfig(t)},i.prototype.setConfig=function(t){t.idle&&(this.idleMillisec=t.idle*1e3),t.ping&&(this.pingMillisec=t.ping*1e3),t.idleSensitivity&&(this.idleSensitivityMillisec=t.idleSensitivity*1e3),t.timeout&&(this.timeout=t.timeout)},i.prototype.setCustomActivityEvents=function(t){if(this.idleSubscription&&!this.idleSubscription.closed){console.error("Call stopWatching() before set custom activity events");return}this.activityEvents$=t},i.prototype.setupTimer=function(t){var e=this;this._ngZone.runOutsideAngular(function(){e.timer$=d(function(){return new Date}).pipe(s(function(p){return p()}),c(function(p){return u(1e3).pipe(s(function(){return Math.round((new Date().valueOf()-p.valueOf())/1e3)}),n(function(C){C>=t&&e.timeout$.next(!0)}))}))})},i.prototype.setupPing=function(t){var e=this;this.ping$=u(t).pipe(l(function(){return!e.isTimeout}))},i.decorators=[{type:T,args:[{providedIn:"root"}]}],i.ctorParameters=function(){return[{type:m,decorators:[{type:M}]},{type:h}]},i.ngInjectableDef=I({factory:function(){return new i(a(m,8),a(h))},token:i,providedIn:"root"}),i}(),x=function(){function i(){}return i.forRoot=function(t){return{ngModule:i,providers:[{provide:m,useValue:t}]}},i.decorators=[{type:w,args:[{imports:[]}]}],i}();export{E as a,x as b};
